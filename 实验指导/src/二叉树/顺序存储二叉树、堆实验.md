# é¡ºåºå­˜å‚¨äºŒå‰æ ‘ã€å †å®éªŒ

## 1 å°æ ¹å † minHeap çš„å®ç°

æ–°å»º minHeap.h æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```c++{class="line-numbers"}
#ifndef MINHEAP_H
#define MINHEAP_H

#include<vector>
#include<iostream>
using namespace std;
template<class T>
class minHeap{
private:
    vector<T> m_vec;
    void percolate_down(int h);   //å‘ä¸‹è°ƒæ•´å †ç»“æ„
    void percolate_up();          //å‘ä¸Šè°ƒæ•´å †ç»“æ„
public:
    minHeap(){};
    minHeap(vector<T> &vt);
    T top(){return m_vec[0];}     //è¿”å›å †é¡¶å…ƒç´ 
    void insert(T item);          //æ’å…¥å…ƒç´ 
    void delete_min();            //åˆ é™¤å †é¡¶å…ƒç´ 
    unsigned long size(){return m_vec.size();}
};

#endif
```

ç¼–è¾‘ main å‡½æ•°ï¼š

```c++{class="line-numbers"}
#include <iostream>
#include "minHeap.h"
using namespace std;
int main() {
    minHeap<int> a;
    return 0;
}
```

ç¼–è¯‘è¿è¡Œã€‚
ğŸ¥³å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç»§ç»­ä¸‹é¢çš„æ“ä½œã€‚

### æ’å…¥å…ƒç´ 

åœ¨ minHeap.h æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```c++{class="line-numbers"}
template<class T>
void minHeap<T>::percolate_up() {
    int c = m_vec.size()-1;
    int p = (c-1)/2;
    T tmp = m_vec[c];
    while(c>0){
        if(m_vec[p] <= tmp){
            break;
        }else{
            m_vec[c] = m_vec[p];
            c=p;
            p=(c-1)/2;
        }
    }
    m_vec[c] = tmp;
}

template<class T>
void minHeap<T>::insert(T item) {
    m_vec.push_back(item);
    percolate_up();
}
```

ä¿®æ”¹ mainå‡½æ•°ï¼š

```c++{class="line-numbers"}
int main() {
    minHeap<int> a;
    a.insert(5);
    cout<<a.top()<<endl;
    a.insert(10);
    cout<<a.top()<<endl;
    a.insert(1);
    cout<<a.top()<<endl;
    return 0;
}
```

ç¼–è¯‘è¿è¡Œï¼Œåº”æœ‰å¦‚ä¸‹è¾“å‡ºï¼š
>5
5
1

ğŸ¥³å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç»§ç»­ä¸‹é¢çš„æ“ä½œã€‚

### åˆ é™¤å †é¡¶å…ƒç´ 

åœ¨ minHeap.h æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```c++{class="line-numbers"}
template<class T>
void minHeap<T>::percolate_down(int h){
    int p = h;
    int c = 2*p +1;
    T tmp = m_vec[p];
    while(c <m_vec.size()){
        if(c+1<m_vec.size() && m_vec[c+1] < m_vec[c]){
            ++c;
        }
        if(tmp <= m_vec[c]){
            break;
        }else{
            m_vec[p] = m_vec[c];
            p = c;
            c = 2*p+1;
        }
    }
    m_vec[p] = tmp;
}

template<class T>
void minHeap<T>::delete_min(){
    if(m_vec.empty()){
        cout<<"å †ä¸ºç©º"<<endl;
        exit(1);
    }
    m_vec[0] = m_vec.back();
    m_vec.pop_back();
    percolate_down(0);
}
```

ä¿®æ”¹ mainå‡½æ•°ï¼š

```c++{class="line-numbers"}
int main() {
    minHeap<int> a;
    a.insert(5);
    cout<<a.top()<<endl;
    a.insert(10);
    cout<<a.top()<<endl;
    a.insert(1);
    cout<<a.top()<<endl;
    
    a.delete_min();
    cout<<a.top()<<endl;
    a.delete_min();
    cout<<a.top()<<endl;
    return 0;
}
```

ç¼–è¯‘è¿è¡Œï¼Œåº”æœ‰å¦‚ä¸‹è¾“å‡ºï¼š
>5
5
1
5
10

ğŸ¥³å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç»§ç»­ä¸‹é¢çš„æ“ä½œã€‚

### ä»æ•°ç»„å»ºå †

åœ¨ minHeap.h æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```c++{class="line-numbers"}
template<class T>
minHeap<T>::minHeap(vector<T> &vt){
    for (int i=0; i<vt.size(); ++i){
        m_vec.push_back(vt[i]);
    }
    
    for(int i= m_vec.size()/2 - 1; i>=0; --i){
        percolate_down(i);
    }
}
```

æ›´æ”¹ main å‡½æ•°ï¼š

```c++{class="line-numbers"}
int main() {
    vector<int> v = {5,2,6,7,1,10};
    minHeap<int> a(v);
    
    a.delete_min();
    cout<<a.top()<<endl;
    a.delete_min();
    cout<<a.top()<<endl;
    a.delete_min();
    cout<<a.top()<<endl;
    a.delete_min();
    cout<<a.top()<<endl;
    return 0;
}
```

ğŸ¥³å¦‚æœä»¥ä¸Šæ“ä½œéƒ½ä¸€åˆ‡é¡ºåˆ©ï¼Œä½ å·²æŒæ¡å¸¦å°æ ¹å †çš„åŸºæœ¬å®ç°æ–¹æ³•ã€‚

## 2 å°æ ¹å †æŒ‘æˆ˜

æ ¹æ®å †çš„æ€§è´¨ï¼Œå®ç°å †æ’åºå‡½æ•°ã€‚
å¹¶å¯¹ heap_exp.txt æ–‡ä»¶ä¸­çš„æ•°æ®è¿›è¡Œæ’åºã€‚

heap_exp.txt æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä¸ºå…ƒç´ ä¸ªæ•°ï¼Œä¹‹åçš„æ¯ä¸€è¡Œéƒ½ä¸ºä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå…±20000ä¸ªå…ƒç´ ã€‚
heap_exp.txt çš„å‰å‡ è¡Œå¦‚ä¸‹ï¼š

```{class="line-numbers"}
200000
4842.9024
2890.1323
8359.5612
3827.4987
3488.7261
6242.1600
5350.4973
â€¦â€¦
```

åŒæ—¶å®ç°å†’æ³¡æ’åºç®—æ³•ï¼Œå¯¹æ¯”å†’æ³¡æ’åºç®—æ³•ä¸å †æ’åºç®—æ³•åœ¨è¿™ä¸ªæ•°æ®é›†ä¸Šçš„æ•ˆç‡å·®å¼‚ã€‚

å¯ä»¥ä½¿ç”¨ clock å‡½æ•°å¯¹æ“ä½œè¿›è¡Œè®¡æ—¶ï¼š

```c++{class="line-numbers"}
#include <iostream>
#include <ctime>  //ä½¿ç”¨clockå‡½æ•°éœ€è¦æ­¤å¤´æ–‡ä»¶
using namespace std;
int main() {
    auto t = clock();
    
    ...

    t = clock() - t;
    cout<<(float)t/CLOCKS_PER_SEC;
    return 0;
}
```

ä»¥ä¸Šä»£ç å°†æ‰“å°ç¬¬5-9è¡Œä¹‹é—´æ“ä½œçš„è€—æ—¶ã€‚
